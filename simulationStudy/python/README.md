
# Fit VAE on Generated Data

This document explains how to train and fit a Variational Autoencoder (VAE) on the data generated by `R/simulate_data.R`.  
The VAE is implemented in Python using the TensorFlow library.

---

## Installation

### Pre-requisites

1. Ensure that **Anaconda** is installed on your system (Linux, macOS, or Windows).

You can download it here: üëâ [https://www.anaconda.com/products/distribution](https://www.anaconda.com/products/distribution)


2. Navigate to the `simulationStudy/python` directory:

```bash
cd simulationStudy/python
```

### Set Up the TensorFlow Conda Environment

‚ö†Ô∏è **Important:** This setup will remove any existing Conda environment named `tensorflow` to ensure a clean installation.

1. **Remove any existing `tensorflow` environment:**

```bash
conda env remove -n tensorflow
```

2. **Create the environment from the provided YAML file:**

```bash
conda env create -f tensorflow.yml
```

3. **Activate the environment:**

```bash
conda activate tensorflow
```

4. **Run on cpu**
```bash
export CUDA_VISIBLE_DEVICES=-1
```

---

## Running the VAE Fits

Once the environment is set up, you can launch the VAE fitting process.  
This step may take a while depending on your machine.

---

### **On Windows:**

Open **PowerShell**, navigate to the project folder, and run:

```powershell
./fit_vae_all_sims.ps1
```

---

### **On Linux/macOS:**

Open a terminal, navigate to the project folder, and run:

```bash
chmod +x fit_vae_all_sims.sh
./fit_vae_all_sims.sh
```

---

## Output

The fitted models and results will be saved in:

```
simulationStudy/simulations/<experiment>/<simulation_setting>/vae_fit
```

---

## Notes

- Ensure the simulated datasets have been generated using `R/simulate_data.R` before running the VAE fits.
- Scripts are compatible with **Linux**, **macOS**, and **Windows** platforms.
